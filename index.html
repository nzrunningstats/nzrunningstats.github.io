<!--
	--------------------------------------------------------------------
	--------------------------------------------------------------------
	This file is part of NZ Running Stats.

    NZ Running Stats is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    NZ Running Stats is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with NZ Running Stats.  If not, see <http://www.gnu.org/licenses/>. 
    --------------------------------------------------------------------
    --------------------------------------------------------------------
-->


<html>
<head>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-128562040-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-128562040-1');
</script>






<title>NZ running stats</title>
<link rel="icon" href="src/Images/logo.svg">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<meta name="description" content="New Zealand marathon and half-marathon statistical summaries." />
<link rel="stylesheet" type="text/css" href="src/styles.css">
<link rel="stylesheet" type="text/css" media="screen and (max-device-width: 1200px)" href="src/mobilestyles.css" />
<script language='JavaScript' type='text/JavaScript' src="src/jquery-3.1.1.min.js"></script>
<script language='JavaScript' type='text/JavaScript' src="src/velocity.min.js"></script>
<script language='JavaScript' type='text/JavaScript' src="src/resultstable.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>




<script language='JavaScript' type='text/JavaScript'>


function init(){


	// Mobile
	var is_mobile = (/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent) 
		   			 || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4)));

	if (is_mobile) $("mobilegap").html("<br style='line-height:2em'>");
					 
					 
	// Internet Explorer 6-11
	var isIE = /*@cc_on!@*/false || !!document.documentMode;

	// Edge 20+
	var isEdge = !isIE && !!window.StyleMedia;
	var stylesheet = isIE || isEdge ? "IEstyles" : "styles";
	
	
	
	console.log(isIE, isEdge, is_mobile, stylesheet);
	
	if (stylesheet != "styles") {
		$('head').find("link").remove();
		$('head').append('<link rel="stylesheet" type="text/css" href="src/' + stylesheet + '.css">');
	}

	
	if (isIE || isEdge) $("#pacecalculator").hide(0);
	 


	queryPaceCalulator(true);
	
	console.log("width",  $(document).width(), screen.width, screen.height);

            

}


function queryPaceCalulator(from_speed = true){


	if (from_speed){
	
		var speed = parseFloat($("#calculator_speed").val());
		if (speed == null || isNaN(speed)) return;
		var pace = 1 / (speed / 60);
		console.log(speed, pace);
		$("#calculator_pace").val(formatMinutes_MMSS(pace));
		
	}
	
	else {
	
		var pace = $("#calculator_pace").val()
		var time_split = pace.split(":");
		if (pace == null || !pace.match($("#calculator_pace").attr("pattern")) || time_split.length != 2) return;
	
		// Convert time to minutes
		var minutes = parseFloat(time_split[0]) + parseFloat(time_split[1]/60);
		
		var speed = Math.round((1 / minutes) * 6000) / 100;
		//console.log(minutes, speed);
		$("#calculator_speed").val(speed);
	
	}


};




</script>

</head>

<body onload="init()">
	<div id="screenContainer" style="position:relative">
		<div id="screen" style="opacity:1;">


				

			<div id="main" style="background-color:white">
				
				
				<div id="header" class="header" style="width:100%;">
					<div class="maintitle"> NZ Running Stats</div>
					<div class="subtitle"> A statistical summary of marathons from across New Zealand  </div>
				</div>


		
		
				<div class="tabs-bg"  style="width:100%;">
				
					<div style="text-align:center; margin-right:0px;">
						<span class="tab selected">Home</span>
						<a href="marathon/"> <span class="tab">Marathon</span></a>
						<a href="half-marathon/"> <span class="tab">Half marathon</span></a>
						<a href="10km/"> <span class="tab">10km race</span></a>
						<a href="contact/"> <span class="tab">Contact us</span></a>
					</div>
				</div>

				<br><br>






				<div class="display-div">

					
					<h1> New Zealand Running Stats  <img src="src/Images/logo.svg" style="height:1em; vertical-align:top"> </h1>
							
					<div class="caption-div">
						
						Launched in November 2018, NZ Running Stats is dedicated to providing a statistical summary of marathon, 
						half marathon and 10km road race data from across New Zealand.  <br><br>
										
					


					
						
						<b style="margin-right:10px">Races:</b>
						
						
						
						
						<a href="marathon/" title="View marathon statistics">
							<span class="linkspan">
								Marathon
							</span>
						</a>
						

						
						
						<a href="half-marathon/" title="View half-marathon statistics">
							<span class="linkspan">
								Half marathon
							</span>
						</a>




						<a href="10km/" title="View 10km race statistics">
							<span class="linkspan">
								10km race
							</span>
						</a>
						
						<br><br>
						
						
						Stay tuned for regular updates as we introduce new data, new races and new statistical analyses.


					</div>


				</div>
				
				
				
				
				
				


				<div class="display-div" id="pacecalculator">

					
					<h1> Pace calculator </h1>
							
					<div class="caption-div">
						
						Pace is measured in min/km and describes how many minutes it will take to travel 1 kilometer. Use the calculator below to convert between pace and speed.


						<div class="query"> 

						
							A speed of <input  type="number" onFocus="this.select();" onChange='queryPaceCalulator(true);' class="userInput fw" style="text-align:center; box-shadow:0px 0px 0px;"  step="0.1" value="10" min=0 max=100  id="calculator_speed"> 
							
							
							km/hr  is equal to a  pace of
							

							<input onFocus="this.select();" onChange='queryPaceCalulator(false);'  class="userInput fw" style="text-align:center"  type="text" value="5:00"  id="calculator_pace" pattern="[0-9]+:[0-9][0-9]"  >

							
							min/km.
							
							 
						</div>
						


					</div>


				</div>
				




				
				
				<div class="display-div">

					
					<h1> Linear regression </h1>
							
					<div class="caption-div">
					
					
						Suppose that one particular course, for example the Devonport half-marathon, was regularly attended by an abundance of professional runners. 
						An even greater number of professional runners than the average half-marathon.
						Because professional runners are on average faster than casual runners, if you were to look at the average completion time at this course
						you may wrongfully conclude that the course is faster than other courses around the country. <br><br>
						
						This is due to hidden correlations in the data (in this instance between the participants and the course) that can lead to bad inference. This phenomenon is known as
						<a target="_blank" href="https://en.wikipedia.org/wiki/Simpson%27s_paradox" title = "https://en.wikipedia.org/wiki/Simpson%27s_paradox"><b>Simpson's Paradox</b></a>.  <br><br>
						
					
					
					
					
						If we want to infer the effect that the course has on completion time, it is important to disentangle the course from the participants. This is done using a log-linear model. <br><br>
						
						
					
						Let $t_i$ be the time taken for person $i$ to complete a race. We used the following log-linear model to predict $t$:
					

							<h2>
							$$t_i = \text{exp\{}\beta_{\text{gender}_i} + \beta_{\text{name}_i}  + \beta_{\text{course}_i}  \text{\}}$$
							</h2>
							
							
						where $\text{gender}_i$ and $\text{name}_i$ are the gender and name, respectively of the runner and $\text{course}_i$ is the race course. Runners who appear in less than
						two races are discarded from the dataset. <br><br>
						
						
						
						The estimated values of $\beta_{\text{course}}$ for each course, and each year, are displayed on the respective statistics pages. 
						
						These estimates can help you make an informed decision on which course to run.
					
						
						
						
					</div>


				</div>
				
				
				
				
				
				
				
				
				<div class="display-div">

					
					<h1> Data availability </h1>
							
					<div class="caption-div">
					
						
						The data used by NZ Running Stats was collected from a range of public databases.
					
						
					
					
						
					</div>


				</div>


					<div class="display-div">

					
						<h1>Version History</h1>
							
						<div class="caption-div">
					
							<b><a href="https://github.com/nzrunningstats/nzrunningstats.github.io/releases/tag/v1.0">Version 1.0</a> (2018-11-29)</b>
							<ul> 
								<li> First version including marathon, half marathon and 10km results
							</ul>

							<b><a href="https://github.com/nzrunningstats/nzrunningstats.github.io/releases/tag/v1.1">Version 1.1</a> (2018-11-29)</b>
							<ul> 
								<li> Added 2015-2018 Mountain to Surf Marathons (now clear that this is a fast marathon as wisdom of crowds predicted)
								<li> Removed marathons before 2014 (this avoids Wellington 2013 which was short).
							</ul>

							<b><a href="https://github.com/nzrunningstats/nzrunningstats.github.io/releases/tag/v1.2">Version 1.2</a> (2018-12-02)</b>
							<ul> 
							    <li> All marathons now ranked using last 5 years where available (added 2014 Mountain to Surf Marathons (now ranked fastest), and added 2014-2015 Buller marathon)
								<li> Added 2014-2018 Feilding Marathon (New Zealand's longest running marathon)
								<li> Added 2016-2018 Mountain to Surf half marathons
								<li> Added 2016-2018 Cambridge half marathons
								<li> Added 2018 Tauranga City to Surf half marathon
								<li> Removed bogus 2017 Omaha half marathon from Nebraska (lol) and added today's 2018 Omaha half marathon
 							</ul>
 							
 							<b><a href="https://github.com/nzrunningstats/nzrunningstats.github.io/releases/tag/v1.3">Version 1.3</a> (2018-12-09)</b>
							<ul> 
							    <li> Added 2015 New Plymouth 10km in place of 2016 New Plymouth 10km which is missing division data.
							    <li> Added 2017 Southern lakes 10km race.
							    <li> Added 2016-2018 Albany Lakes 10km series races (3 races per year = 9 races)
							</ul>
							
							<b><a href="https://github.com/nzrunningstats/nzrunningstats.github.io/releases/tag/v1.4">Version 1.4</a> (2018-12-09)</b>

							<ul>
								<li>Fixed bug which caused times faster than 1hr to be ignored in following 10 races
									<ul>
										<li> 2015-2018 manawatu-striders 10km
										<li> 2015-2017 new-plymouths 10km
										<li> 2016 huntly and taupo 10km races
										<li> 2017 southern-lakes 10km race
									</ul>
							</ul>
						</div>


					</div>


	
	
	
	
	<br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br>
	<br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> <br> 




	
	
		<div class="header">
			New Zealand Running Stats 2018
		</div>
	


		</div>
	</div>


</div>
</body>
</html>
